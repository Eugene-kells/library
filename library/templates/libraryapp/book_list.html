{% extends 'libraryapp/base.html' %}

{% block content %}


<h1 class="itemlisth1">Books</h1>

{% if request.user.is_authenticated %}
  <a href="{% url 'book_new' %}" class="itemlista"><button type="button">Add book</button></a>
{% endif %}

<div class="listbox">

    {% for book in object_list %}

      <div class="listitem">

        <div class="info">
          <h1>
          <a href="{% url 'book_detail' pk=book.pk %}">
          {{ book.title }}
          </a>
          </h1>

          <h2>
          Author: <i><a href="{% url 'author_detail' pk=book.author.pk %}">{{ book.author }}</a></i>
          </h2>

          <h2>
            {% if book.release_date %}
              Released: <i>{{ book.release_date }}</i>
            {% endif %}
          </h2>
        </div>

        <div class="userbook">
          {% if request.user.is_authenticated %}
            {% if book in request.user.books.all %}
            <a href="{% url 'delete_user_book' pk=book.pk %}"><button type="button">Remove this book from your books</button></a>
            {% else %}
            <a href="{% url 'add_user_book' pk=book.pk %}"><button type="button">Add this book to your books</button></a>
            {% endif %}
          {% endif %}
        </div>


          <div class="listimage">
          {% if book.cover %}
            <!-- {{ author.photo }} -->
            <a href="{% url 'book_detail' pk=book.pk %}"><img src="{{ book.cover.url }}"></a>
          {% endif %}
          </div>

      </div>

    {% endfor %}

</div>



{% endblock %}
